[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "",
    "text": "Clickstream data reveals how users navigate a product over time, not just what pages they visit or whether they convert. Unlike traditional metrics, sequence-aware analysis shows how early interactions shape later behavior, helping UX teams design experiences that guide users toward their goals.\nIn this project, I simulate clickstream data and apply Markov chains with flow-based visualizations to answer three core UX questions:"
  },
  {
    "objectID": "index.html#environment-setup",
    "href": "index.html#environment-setup",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Environment Setup",
    "text": "Environment Setup\nTo ensure reproducibility, I use a standard analytics stack in R for data manipulation, visualization, and Markov modeling.\n\nLoad libraries and ensure reproducibility\n\n\nCode\n# Ensure results are reproducible\nset.seed(123)\n\n# Core data manipulation and visualization\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(tibble)\nlibrary(ggplot2)\nlibrary(forcats)\n\n# Modeling and visualization\nlibrary(markovchain)\nlibrary(ggalluvial)\nlibrary(plotly)\nlibrary(purrr)"
  },
  {
    "objectID": "index.html#simulating-clickstream-sessions",
    "href": "index.html#simulating-clickstream-sessions",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Simulating Clickstream Sessions",
    "text": "Simulating Clickstream Sessions\nReal clickstream data is often proprietary, so I simulate realistic session paths.\nEach session:\n\nBegins with a page view\nMoves through product exploration and checkout steps\nEnds in either purchase or abandonment\n\nThis simplified structure mirrors typical e-commerce behavior and lets us focus on methodology and insight.\n\n\nCode\n# Number of simulated sessions\nn_sessions &lt;- 500\n\n# Possible interaction events\nevents &lt;- c(\"page_view\", \"product_view\", \"add_to_cart\", \"checkout\", \"logout\")\n\n# Initialize empty dataset\ndf &lt;- data.frame(SessionID = integer(),\n                 UserID = integer(),\n                 EventType = character(),\n                 Outcome = character(),\n                 stringsAsFactors = FALSE)\n\n# Simulate session-level user journeys\nfor (sid in 1:n_sessions) {\n  \n  # Random session length\n  n_events &lt;- sample(3:6, 1)\n  path &lt;- character(n_events)\n  \n  # All sessions start with a page view\n  path[1] &lt;- \"page_view\"\n  \n  # Simulate navigation behavior\n  for (i in 2:n_events) {\n    prev &lt;- path[i - 1]\n    if (prev == \"page_view\") {\n      path[i] &lt;- sample(c(\"product_view\", \"logout\"), 1, prob = c(0.7, 0.3))\n    } else if (prev == \"product_view\") {\n      path[i] &lt;- sample(c(\"add_to_cart\", \"logout\"), 1, prob = c(0.6, 0.4))\n    } else if (prev == \"add_to_cart\") {\n      path[i] &lt;- sample(c(\"checkout\", \"logout\"), 1, prob = c(0.7, 0.3))\n    } else if (prev == \"checkout\") {\n      path[i] &lt;- sample(c(\"purchase\", \"no_purchase\"), 1, prob = c(0.6, 0.4))\n    } else if (prev == \"logout\") {\n      path[i] &lt;- \"no_purchase\"\n    }\n  }\n  \n  # Define session outcome based on final state\n  outcome &lt;- ifelse(path[n_events] == \"purchase\", \"purchase\", \"no_purchase\")\n  \n  # Append session to dataset\n  df &lt;- rbind(df, data.frame(SessionID = sid,\n                             UserID = sid,\n                             EventType = path,\n                             Outcome = outcome,\n                             stringsAsFactors = FALSE))\n}"
  },
  {
    "objectID": "index.html#transforming-events-into-transitions",
    "href": "index.html#transforming-events-into-transitions",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Transforming Events into Transitions",
    "text": "Transforming Events into Transitions\nRaw logs show what happened, but not how events relate to one another.\nBy converting logs into state-to-state transitions, we can analyze navigation probabilistically. The final outcomes (purchase or no_purchase) are treated as absorbing states.\n\n\nCode\n# Build transitions table\ntransitions &lt;- df %&gt;%\n  group_by(SessionID) %&gt;%\n  mutate(next_event = lead(EventType)) %&gt;%\n  ungroup() %&gt;%\n  mutate(next_event = ifelse(is.na(next_event), Outcome, next_event))"
  },
  {
    "objectID": "index.html#modeling-user-behavior-with-markov-chains",
    "href": "index.html#modeling-user-behavior-with-markov-chains",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Modeling User Behavior with Markov Chains",
    "text": "Modeling User Behavior with Markov Chains\nTraditional funnels assume a fixed sequence of steps. Markov chains allow users to:\n\nBranch\nLoop\nAbandon at any point\n\nUX perspective: We can ask, “Given a user’s current interaction, what is the probability they eventually convert?”\n\n\nCode\n# Fit Markov chain using MLE\nmc &lt;- markovchainFit(data = transitions[, c(\"EventType\", \"next_event\")], method = \"mle\")$estimate"
  },
  {
    "objectID": "index.html#measuring-conversion-likelihood",
    "href": "index.html#measuring-conversion-likelihood",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Measuring Conversion Likelihood",
    "text": "Measuring Conversion Likelihood\nBy making purchase and no_purchase absorbing, we can compute the probability that each interaction eventually leads to purchase.\n\n\nCode\n# Define absorbing states\ntm &lt;- mc@transitionMatrix\n\n# Purchase is absorbing\ntm[\"purchase\", ] &lt;- 0\ntm[\"purchase\", \"purchase\"] &lt;- 1\n\n# No purchase is absorbing\ntm[\"no_purchase\", ] &lt;- 0\ntm[\"no_purchase\", \"no_purchase\"] &lt;- 1\n\nmc_abs &lt;- new(\"markovchain\", states = mc@states, transitionMatrix = tm)\n\n# Compute absorption probabilities\nabs_probs &lt;- absorptionProbabilities(mc_abs)\n\n# Absorption rate dataframe\nabs_probs_df &lt;- as.data.frame(abs_probs) %&gt;%\n  rownames_to_column(\"Event\") %&gt;%\n  pivot_longer(-Event, names_to = \"Outcome\", values_to = \"Probability\")\n\n# Remove first two rows\nabs_probs_df &lt;- abs_probs_df[-c(1, 2), ]\n\n\n\nVisualize expected outcomes by interaction\n\n\nCode\n# Plot probability of purchase by event\nggplot(abs_probs_df %&gt;%\n         mutate(Event = fct_reorder(Event, Probability, .fun = max)), aes(x = Event, y = Probability, fill = Outcome)) +\n  geom_col() +\n  coord_flip() +\n  labs(title = \"Probability of Ending in Purchase or No Purchase by Event\",\n       x = \"Event\",\n       y = \"Probability\") +\n  scale_fill_manual(values = c(\"purchase\" = \"steelblue\", \"no_purchase\" = \"tomato\")) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nUX Insight:\n-Later-stage interactions like checkout strongly predict purchase -Intermediate actions such as add_to_cart sharply increase conversion likelihood -Sequence-aware modeling reveals key leverage points that static funnels can miss"
  },
  {
    "objectID": "index.html#ranking-interactions-by-influence",
    "href": "index.html#ranking-interactions-by-influence",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Ranking Interactions by Influence",
    "text": "Ranking Interactions by Influence\n\n\nCode\n# Rank funnel interactions by their likelihood of leading to purchase\nabs_probs_df %&gt;%\n  filter(Outcome == \"purchase\") %&gt;%\n  arrange(desc(Probability))\n\n\n# A tibble: 5 × 3\n  Event        Outcome  Probability\n  &lt;chr&gt;        &lt;chr&gt;          &lt;dbl&gt;\n1 checkout     purchase       0.440\n2 add_to_cart  purchase       0.234\n3 product_view purchase       0.141\n4 page_view    purchase       0.102\n5 logout       purchase       0    \n\n\nUX takeaway: Focus design and A/B testing on high-impact steps, like adding items to the cart or early product views."
  },
  {
    "objectID": "index.html#visualizing-drop-offs-and-user-flow",
    "href": "index.html#visualizing-drop-offs-and-user-flow",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Visualizing Drop-Offs and User Flow",
    "text": "Visualizing Drop-Offs and User Flow\nAlluvial diagrams show branching behavior, revealing:\n\nDominant navigation paths\nWhere users exit\nHow many ways abandonment occurs\n\n\n\nCode\n# Create explicit event-to-event transitions\ndf_flow &lt;- df %&gt;%\n  group_by(SessionID) %&gt;%\n  mutate(next_event = lead(EventType)) %&gt;%\n  ungroup() %&gt;%\n  mutate(next_event = ifelse(is.na(next_event), Outcome, next_event)) %&gt;%\n  filter(!is.na(next_event), next_event != \"\")\n\n# Aggregate transitions\nflow_counts &lt;- df_flow %&gt;%\n  group_by(EventType, next_event) %&gt;%\n  summarise(Freq = n(), .groups = \"drop\") %&gt;%\n  filter(EventType != next_event)\n\n# Collapse terminal states into \"End\" and mark outcome\nflow_counts_clean &lt;- flow_counts %&gt;% mutate(EventType = ifelse(EventType %in% c(\"purchase\", \"no_purchase\"), \"End\", EventType),\n                                           next_event_label = next_event,\n                                           next_event = ifelse(next_event %in% c(\"purchase\", \"no_purchase\"), \"End\", next_event),\n                                           flow_type = case_when(next_event_label == \"purchase\" ~ \"Purchase\",\n                                                                 next_event_label == \"no_purchase\" ~ \"Abandon\",\n                                                                 TRUE ~ \"Intermediate\")) %&gt;%\n  group_by(EventType, next_event, flow_type) %&gt;%\n  summarise(Freq = sum(Freq), .groups = \"drop\")\n\n# Remove first row\nflow_counts_clean &lt;- flow_counts_clean[-c(1, 1), ]\n\n# Define colors for flow types\nflow_colors &lt;- c(\"Purchase\" = \"#2ca02c\",\n                 \"Abandon\" = \"#d62728\",\n                 \"Intermediate\" = \"#1f77b4\")\n\n# Plot the alluvial diagram\nggplot(flow_counts_clean, aes(axis1 = EventType, axis2 = next_event, y = Freq)) +\n  geom_alluvium(aes(fill = flow_type), width = 1/12) +\n  geom_stratum(width = 1/12, fill = \"grey80\", color = \"black\") +\n  geom_text(stat = \"stratum\", aes(label = after_stat(stratum))) +\n  scale_x_discrete(limits = c(\"Current Event\", \"Next Event\")) +\n  scale_fill_manual(values = flow_colors) +\n  labs(title = \"User Flow Through Funnel Steps\",\n       subtitle = \"Green = purchase, Red = abandonment, Blue = intermediate steps\",\n       y = \"Number of Users\",\n       fill = \"Flow Type\") +\n  theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\nUX Insight:\n\nAbandonment occurs across multiple paths, not just at a single step\nLinear funnels oversimplify real behavior; interventions must consider context and branching"
  },
  {
    "objectID": "index.html#purchase-journey-analysis",
    "href": "index.html#purchase-journey-analysis",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Purchase Journey Analysis",
    "text": "Purchase Journey Analysis\nWe examine the journey from three perspectives: magnitude, direction, and structure."
  },
  {
    "objectID": "index.html#funnel-step-completion",
    "href": "index.html#funnel-step-completion",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Funnel: Step Completion",
    "text": "Funnel: Step Completion\n\n\nCode\n# Define the ordered funnel steps from entry to conversion\nfunnel_steps &lt;- c(\"page_view\",\n                  \"product_view\",\n                  \"add_to_cart\",\n                  \"checkout\",\n                  \"purchase\")\n\n# Determine the furthest funnel step reached by each session\nsession_funnel &lt;- df %&gt;%\n  filter(EventType %in% funnel_steps) %&gt;%\n  group_by(SessionID) %&gt;%\n  summarise(step = max(match(EventType, funnel_steps)), .groups = \"drop\")\n\n# Count number of sessions that reached each step or beyond\nfunnel_counts &lt;- data.frame(step = funnel_steps,\n                            value = sapply(seq_along(funnel_steps), function(i)\n                              sum(session_funnel$step &gt;= i)))\n\n# Visualize the funnel as a Plotly funnel chart\nplot_ly(funnel_counts,\n        type = \"funnel\",\n        y = ~step,\n        x = ~value)\n\n\n\n\n\n\nTakeaways:\n\nMajor drop occurs before add_to_cart\nUsers who reach checkout are likely to purchase\nEarly exits drive overall funnel losses"
  },
  {
    "objectID": "index.html#sankey-step-to-step-movement",
    "href": "index.html#sankey-step-to-step-movement",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Sankey: Step-to-Step Movement",
    "text": "Sankey: Step-to-Step Movement\n\n\nCode\n# Create step-to-step transitions across all sessions\ntransitions &lt;- df %&gt;%\n  filter(!is.na(EventType), EventType != \"\") %&gt;%\n  group_by(SessionID) %&gt;%\n  mutate(next_event = lead(EventType)) %&gt;%\n  ungroup() %&gt;%\n  filter(!is.na(next_event)) %&gt;%\n  count(EventType, next_event, name = \"value\")\n\n# Define unique nodes for the Sankey diagram (each funnel step)\nnodes &lt;- data.frame(name = unique(c(transitions$EventType, transitions$next_event)))\n\n# Assign numeric IDs required by Plotly Sankey format\nnodes$id &lt;- seq_len(nrow(nodes)) - 1\n\n# Map transition counts to source and target node IDs\nlinks &lt;- transitions %&gt;%\n  left_join(nodes, by = c(\"EventType\" = \"name\")) %&gt;%\n  rename(source = id) %&gt;%\n  left_join(nodes, by = c(\"next_event\" = \"name\")) %&gt;%\n  rename(target = id)\n\n# Normalize transition values so outgoing flows sum to 1 per source step\nlinks &lt;- links %&gt;%\n  group_by(source) %&gt;%\n  mutate(value = value / sum(value)) %&gt;%\n  ungroup()\n\n# Visualize directional user movement through the funnel as a Sankey diagram\nplot_ly(type = \"sankey\", node = list(label = nodes$name),\n        link = list(source = links$source,\n                    target = links$target,\n                    value = links$value))\n\n\n\n\n\n\nInsight:\n\nEarly exits (logout) dominate drop-offs\nFew users move backward\nSuccessful purchases follow narrow, consistent paths"
  },
  {
    "objectID": "index.html#sunburst-complete-session-paths",
    "href": "index.html#sunburst-complete-session-paths",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Sunburst: Complete Session Paths",
    "text": "Sunburst: Complete Session Paths\n\n\nCode\n# Build full session-level paths and final outcomes (one row per session)\npaths &lt;- df %&gt;%\n  filter(!is.na(EventType), EventType != \"\") %&gt;%\n  group_by(SessionID) %&gt;%\n  summarise(event_path = paste(EventType, collapse = \"/\"), outcome = last(Outcome), .groups = \"drop\")\n\n# Remove any terminal purchase/no_purchase from the raw path\npaths &lt;- paths %&gt;%\n  mutate(event_path = gsub(\"/?(purchase|no_purchase)$\", \"\", event_path))\n\n# Append outcome to create complete paths ending in purchase or no_purchase\npaths &lt;- paths %&gt;%\n  mutate(full_path = paste(event_path, outcome, sep = \"/\"))\n\n# Count how many users followed each unique full path\npath_counts &lt;- paths %&gt;%\n  count(full_path, name = \"value\")\n\n# Generate all hierarchical parent paths needed for a sunburst diagram\nall_paths &lt;- unique(unlist(lapply(strsplit(path_counts$full_path, \"/\"), function(x)\n    sapply(seq_along(x), function(i)\n      paste(x[1:i], collapse = \"/\")))))\n\n# Assemble hierarchical data structure required by Plotly sunburst\nsunburst_data &lt;- data.frame(path = all_paths) %&gt;%\n  left_join(path_counts, by = c(\"path\" = \"full_path\")) %&gt;%\n  mutate(value = ifelse(is.na(value), 0, value), ids = path,\n         labels = sub(\".*/\", \"\", path),\n         parents = ifelse(grepl(\"/\", path), sub(\"/[^/]+$\", \"\", path),\"\"))\n\n# Flag terminal outcome nodes for custom coloring\nsunburst_data &lt;- sunburst_data %&gt;%\n  mutate(is_outcome = labels %in% c(\"purchase\", \"no_purchase\"))\n\n# Visualize complete user journeys as a sunburst diagram\nplot_ly(sunburst_data,\n        type = \"sunburst\",\n        ids = ~ids,\n        labels = ~labels,\n        parents = ~parents,\n        values = ~value,\n        marker = list(colors = ifelse(sunburst_data$is_outcome, ifelse(sunburst_data$labels == \"purchase\", \"#2ca02c\", \"#d62728\"), \"#1f77b4\")))\n\n\n\n\n\n\nInsight:\n\nDominant path: page_view → product_view → add_to_cart → checkout → purchase\nAlternative paths mostly terminate in no_purchase\nConversion depends on staying on a narrow “golden path”\n\nUX Implications\nBy treating events as connected sequences, we can:\n\nIdentify high-impact interactions driving conversion\nUnderstand where and how users abandon\nPrioritize design and experimentation based on evidence\n\nSequence-aware analysis provides better insight than static funnels, while complementing qualitative research to answer where and why UX issues occur.\nBottom line: Behavior-aware analytics leads to smarter UX decisions and more effective product interventions."
  },
  {
    "objectID": "clickstream_simulated.html",
    "href": "clickstream_simulated.html",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "",
    "text": "Clickstream data reveals how users navigate a product over time, not just what pages they visit or whether they convert. Unlike traditional metrics, sequence-aware analysis shows how early interactions shape later behavior, helping UX teams design experiences that guide users toward their goals.\nIn this project, I simulate clickstream data and apply Markov chains with flow-based visualizations to answer three core UX questions:"
  },
  {
    "objectID": "clickstream_simulated.html#environment-setup",
    "href": "clickstream_simulated.html#environment-setup",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Environment Setup",
    "text": "Environment Setup\nTo ensure reproducibility, I use a standard analytics stack in R for data manipulation, visualization, and Markov modeling.\n\nLoad libraries and ensure reproducibility\n\n\nCode\n# Ensure results are reproducible\nset.seed(123)\n\n# Core data manipulation and visualization\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(tibble)\nlibrary(ggplot2)\nlibrary(forcats)\n\n# Modeling and visualization\nlibrary(markovchain)\nlibrary(ggalluvial)\nlibrary(plotly)\nlibrary(purrr)"
  },
  {
    "objectID": "clickstream_simulated.html#simulating-clickstream-sessions",
    "href": "clickstream_simulated.html#simulating-clickstream-sessions",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Simulating Clickstream Sessions",
    "text": "Simulating Clickstream Sessions\nReal clickstream data is often proprietary, so I simulate realistic session paths.\nEach session:\n\nBegins with a page view\nMoves through product exploration and checkout steps\nEnds in either purchase or abandonment\n\nThis simplified structure mirrors typical e-commerce behavior and lets us focus on methodology and insight.\n\n\nCode\n# Number of simulated sessions\nn_sessions &lt;- 500\n\n# Possible interaction events\nevents &lt;- c(\"page_view\", \"product_view\", \"add_to_cart\", \"checkout\", \"logout\")\n\n# Initialize empty dataset\ndf &lt;- data.frame(SessionID = integer(),\n                 UserID = integer(),\n                 EventType = character(),\n                 Outcome = character(),\n                 stringsAsFactors = FALSE)\n\n# Simulate session-level user journeys\nfor (sid in 1:n_sessions) {\n  \n  # Random session length\n  n_events &lt;- sample(3:6, 1)\n  path &lt;- character(n_events)\n  \n  # All sessions start with a page view\n  path[1] &lt;- \"page_view\"\n  \n  # Simulate navigation behavior\n  for (i in 2:n_events) {\n    prev &lt;- path[i - 1]\n    if (prev == \"page_view\") {\n      path[i] &lt;- sample(c(\"product_view\", \"logout\"), 1, prob = c(0.7, 0.3))\n    } else if (prev == \"product_view\") {\n      path[i] &lt;- sample(c(\"add_to_cart\", \"logout\"), 1, prob = c(0.6, 0.4))\n    } else if (prev == \"add_to_cart\") {\n      path[i] &lt;- sample(c(\"checkout\", \"logout\"), 1, prob = c(0.7, 0.3))\n    } else if (prev == \"checkout\") {\n      path[i] &lt;- sample(c(\"purchase\", \"no_purchase\"), 1, prob = c(0.6, 0.4))\n    } else if (prev == \"logout\") {\n      path[i] &lt;- \"no_purchase\"\n    }\n  }\n  \n  # Define session outcome based on final state\n  outcome &lt;- ifelse(path[n_events] == \"purchase\", \"purchase\", \"no_purchase\")\n  \n  # Append session to dataset\n  df &lt;- rbind(df, data.frame(SessionID = sid,\n                             UserID = sid,\n                             EventType = path,\n                             Outcome = outcome,\n                             stringsAsFactors = FALSE))\n}"
  },
  {
    "objectID": "clickstream_simulated.html#transforming-events-into-transitions",
    "href": "clickstream_simulated.html#transforming-events-into-transitions",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Transforming Events into Transitions",
    "text": "Transforming Events into Transitions\nRaw logs show what happened, but not how events relate to one another.\nBy converting logs into state-to-state transitions, we can analyze navigation probabilistically. The final outcomes (purchase or no_purchase) are treated as absorbing states.\n\n\nCode\n# Build transitions table\ntransitions &lt;- df %&gt;%\n  group_by(SessionID) %&gt;%\n  mutate(next_event = lead(EventType)) %&gt;%\n  ungroup() %&gt;%\n  mutate(next_event = ifelse(is.na(next_event), Outcome, next_event))"
  },
  {
    "objectID": "clickstream_simulated.html#modeling-user-behavior-with-markov-chains",
    "href": "clickstream_simulated.html#modeling-user-behavior-with-markov-chains",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Modeling User Behavior with Markov Chains",
    "text": "Modeling User Behavior with Markov Chains\nTraditional funnels assume a fixed sequence of steps. Markov chains allow users to:\n\nBranch\nLoop\nAbandon at any point\n\nUX perspective: We can ask, “Given a user’s current interaction, what is the probability they eventually convert?”\n\n\nCode\n# Fit Markov chain using MLE\nmc &lt;- markovchainFit(data = transitions[, c(\"EventType\", \"next_event\")], method = \"mle\")$estimate"
  },
  {
    "objectID": "clickstream_simulated.html#measuring-conversion-likelihood",
    "href": "clickstream_simulated.html#measuring-conversion-likelihood",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Measuring Conversion Likelihood",
    "text": "Measuring Conversion Likelihood\nBy making purchase and no_purchase absorbing, we can compute the probability that each interaction eventually leads to purchase.\n\n\nCode\n# Define absorbing states\ntm &lt;- mc@transitionMatrix\n\n# Purchase is absorbing\ntm[\"purchase\", ] &lt;- 0\ntm[\"purchase\", \"purchase\"] &lt;- 1\n\n# No purchase is absorbing\ntm[\"no_purchase\", ] &lt;- 0\ntm[\"no_purchase\", \"no_purchase\"] &lt;- 1\n\nmc_abs &lt;- new(\"markovchain\", states = mc@states, transitionMatrix = tm)\n\n# Compute absorption probabilities\nabs_probs &lt;- absorptionProbabilities(mc_abs)\n\n# Absorption rate dataframe\nabs_probs_df &lt;- as.data.frame(abs_probs) %&gt;%\n  rownames_to_column(\"Event\") %&gt;%\n  pivot_longer(-Event, names_to = \"Outcome\", values_to = \"Probability\")\n\n# Remove first two rows\nabs_probs_df &lt;- abs_probs_df[-c(1, 2), ]\n\n\n\nVisualize expected outcomes by interaction\n\n\nCode\n# Plot probability of purchase by event\nggplot(abs_probs_df %&gt;%\n         mutate(Event = fct_reorder(Event, Probability, .fun = max)), aes(x = Event, y = Probability, fill = Outcome)) +\n  geom_col() +\n  coord_flip() +\n  labs(title = \"Probability of Ending in Purchase or No Purchase by Event\",\n       x = \"Event\",\n       y = \"Probability\") +\n  scale_fill_manual(values = c(\"purchase\" = \"steelblue\", \"no_purchase\" = \"tomato\")) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nUX Insight:\n-Later-stage interactions like checkout strongly predict purchase -Intermediate actions such as add_to_cart sharply increase conversion likelihood -Sequence-aware modeling reveals key leverage points that static funnels can miss"
  },
  {
    "objectID": "clickstream_simulated.html#ranking-interactions-by-influence",
    "href": "clickstream_simulated.html#ranking-interactions-by-influence",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Ranking Interactions by Influence",
    "text": "Ranking Interactions by Influence\n\n\nCode\n# Rank funnel interactions by their likelihood of leading to purchase\nabs_probs_df %&gt;%\n  filter(Outcome == \"purchase\") %&gt;%\n  arrange(desc(Probability))\n\n\n# A tibble: 5 × 3\n  Event        Outcome  Probability\n  &lt;chr&gt;        &lt;chr&gt;          &lt;dbl&gt;\n1 checkout     purchase       0.440\n2 add_to_cart  purchase       0.234\n3 product_view purchase       0.141\n4 page_view    purchase       0.102\n5 logout       purchase       0    \n\n\nUX takeaway: Focus design and A/B testing on high-impact steps, like adding items to the cart or early product views."
  },
  {
    "objectID": "clickstream_simulated.html#visualizing-drop-offs-and-user-flow",
    "href": "clickstream_simulated.html#visualizing-drop-offs-and-user-flow",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Visualizing Drop-Offs and User Flow",
    "text": "Visualizing Drop-Offs and User Flow\nAlluvial diagrams show branching behavior, revealing:\n\nDominant navigation paths\nWhere users exit\nHow many ways abandonment occurs\n\n\n\nCode\n# Create explicit event-to-event transitions\ndf_flow &lt;- df %&gt;%\n  group_by(SessionID) %&gt;%\n  mutate(next_event = lead(EventType)) %&gt;%\n  ungroup() %&gt;%\n  mutate(next_event = ifelse(is.na(next_event), Outcome, next_event)) %&gt;%\n  filter(!is.na(next_event), next_event != \"\")\n\n# Aggregate transitions\nflow_counts &lt;- df_flow %&gt;%\n  group_by(EventType, next_event) %&gt;%\n  summarise(Freq = n(), .groups = \"drop\") %&gt;%\n  filter(EventType != next_event)\n\n# Collapse terminal states into \"End\" and mark outcome\nflow_counts_clean &lt;- flow_counts %&gt;% mutate(EventType = ifelse(EventType %in% c(\"purchase\", \"no_purchase\"), \"End\", EventType),\n                                           next_event_label = next_event,\n                                           next_event = ifelse(next_event %in% c(\"purchase\", \"no_purchase\"), \"End\", next_event),\n                                           flow_type = case_when(next_event_label == \"purchase\" ~ \"Purchase\",\n                                                                 next_event_label == \"no_purchase\" ~ \"Abandon\",\n                                                                 TRUE ~ \"Intermediate\")) %&gt;%\n  group_by(EventType, next_event, flow_type) %&gt;%\n  summarise(Freq = sum(Freq), .groups = \"drop\")\n\n# Remove first row\nflow_counts_clean &lt;- flow_counts_clean[-c(1, 1), ]\n\n# Define colors for flow types\nflow_colors &lt;- c(\"Purchase\" = \"#2ca02c\",\n                 \"Abandon\" = \"#d62728\",\n                 \"Intermediate\" = \"#1f77b4\")\n\n# Plot the alluvial diagram\nggplot(flow_counts_clean, aes(axis1 = EventType, axis2 = next_event, y = Freq)) +\n  geom_alluvium(aes(fill = flow_type), width = 1/12) +\n  geom_stratum(width = 1/12, fill = \"grey80\", color = \"black\") +\n  geom_text(stat = \"stratum\", aes(label = after_stat(stratum))) +\n  scale_x_discrete(limits = c(\"Current Event\", \"Next Event\")) +\n  scale_fill_manual(values = flow_colors) +\n  labs(title = \"User Flow Through Funnel Steps\",\n       subtitle = \"Green = purchase, Red = abandonment, Blue = intermediate steps\",\n       y = \"Number of Users\",\n       fill = \"Flow Type\") +\n  theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\nUX Insight:\n\nAbandonment occurs across multiple paths, not just at a single step\nLinear funnels oversimplify real behavior; interventions must consider context and branching"
  },
  {
    "objectID": "clickstream_simulated.html#purchase-journey-analysis",
    "href": "clickstream_simulated.html#purchase-journey-analysis",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Purchase Journey Analysis",
    "text": "Purchase Journey Analysis\nWe examine the journey from three perspectives: magnitude, direction, and structure."
  },
  {
    "objectID": "clickstream_simulated.html#funnel-step-completion",
    "href": "clickstream_simulated.html#funnel-step-completion",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Funnel: Step Completion",
    "text": "Funnel: Step Completion\n\n\nCode\n# Define the ordered funnel steps from entry to conversion\nfunnel_steps &lt;- c(\"page_view\",\n                  \"product_view\",\n                  \"add_to_cart\",\n                  \"checkout\",\n                  \"purchase\")\n\n# Determine the furthest funnel step reached by each session\nsession_funnel &lt;- df %&gt;%\n  filter(EventType %in% funnel_steps) %&gt;%\n  group_by(SessionID) %&gt;%\n  summarise(step = max(match(EventType, funnel_steps)), .groups = \"drop\")\n\n# Count number of sessions that reached each step or beyond\nfunnel_counts &lt;- data.frame(step = funnel_steps,\n                            value = sapply(seq_along(funnel_steps), function(i)\n                              sum(session_funnel$step &gt;= i)))\n\n# Visualize the funnel as a Plotly funnel chart\nplot_ly(funnel_counts,\n        type = \"funnel\",\n        y = ~step,\n        x = ~value)\n\n\n\n\n\n\nTakeaways:\n\nMajor drop occurs before add_to_cart\nUsers who reach checkout are likely to purchase\nEarly exits drive overall funnel losses"
  },
  {
    "objectID": "clickstream_simulated.html#sankey-step-to-step-movement",
    "href": "clickstream_simulated.html#sankey-step-to-step-movement",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Sankey: Step-to-Step Movement",
    "text": "Sankey: Step-to-Step Movement\n\n\nCode\n# Create step-to-step transitions across all sessions\ntransitions &lt;- df %&gt;%\n  filter(!is.na(EventType), EventType != \"\") %&gt;%\n  group_by(SessionID) %&gt;%\n  mutate(next_event = lead(EventType)) %&gt;%\n  ungroup() %&gt;%\n  filter(!is.na(next_event)) %&gt;%\n  count(EventType, next_event, name = \"value\")\n\n# Define unique nodes for the Sankey diagram (each funnel step)\nnodes &lt;- data.frame(name = unique(c(transitions$EventType, transitions$next_event)))\n\n# Assign numeric IDs required by Plotly Sankey format\nnodes$id &lt;- seq_len(nrow(nodes)) - 1\n\n# Map transition counts to source and target node IDs\nlinks &lt;- transitions %&gt;%\n  left_join(nodes, by = c(\"EventType\" = \"name\")) %&gt;%\n  rename(source = id) %&gt;%\n  left_join(nodes, by = c(\"next_event\" = \"name\")) %&gt;%\n  rename(target = id)\n\n# Normalize transition values so outgoing flows sum to 1 per source step\nlinks &lt;- links %&gt;%\n  group_by(source) %&gt;%\n  mutate(value = value / sum(value)) %&gt;%\n  ungroup()\n\n# Visualize directional user movement through the funnel as a Sankey diagram\nplot_ly(type = \"sankey\", node = list(label = nodes$name),\n        link = list(source = links$source,\n                    target = links$target,\n                    value = links$value))\n\n\n\n\n\n\nInsight:\n\nEarly exits (logout) dominate drop-offs\nFew users move backward\nSuccessful purchases follow narrow, consistent paths"
  },
  {
    "objectID": "clickstream_simulated.html#sunburst-complete-session-paths",
    "href": "clickstream_simulated.html#sunburst-complete-session-paths",
    "title": "Understanding User Journeys with Clickstream Analysis",
    "section": "Sunburst: Complete Session Paths",
    "text": "Sunburst: Complete Session Paths\n\n\nCode\n# Build full session-level paths and final outcomes (one row per session)\npaths &lt;- df %&gt;%\n  filter(!is.na(EventType), EventType != \"\") %&gt;%\n  group_by(SessionID) %&gt;%\n  summarise(event_path = paste(EventType, collapse = \"/\"), outcome = last(Outcome), .groups = \"drop\")\n\n# Remove any terminal purchase/no_purchase from the raw path\npaths &lt;- paths %&gt;%\n  mutate(event_path = gsub(\"/?(purchase|no_purchase)$\", \"\", event_path))\n\n# Append outcome to create complete paths ending in purchase or no_purchase\npaths &lt;- paths %&gt;%\n  mutate(full_path = paste(event_path, outcome, sep = \"/\"))\n\n# Count how many users followed each unique full path\npath_counts &lt;- paths %&gt;%\n  count(full_path, name = \"value\")\n\n# Generate all hierarchical parent paths needed for a sunburst diagram\nall_paths &lt;- unique(unlist(lapply(strsplit(path_counts$full_path, \"/\"), function(x)\n    sapply(seq_along(x), function(i)\n      paste(x[1:i], collapse = \"/\")))))\n\n# Assemble hierarchical data structure required by Plotly sunburst\nsunburst_data &lt;- data.frame(path = all_paths) %&gt;%\n  left_join(path_counts, by = c(\"path\" = \"full_path\")) %&gt;%\n  mutate(value = ifelse(is.na(value), 0, value), ids = path,\n         labels = sub(\".*/\", \"\", path),\n         parents = ifelse(grepl(\"/\", path), sub(\"/[^/]+$\", \"\", path),\"\"))\n\n# Flag terminal outcome nodes for custom coloring\nsunburst_data &lt;- sunburst_data %&gt;%\n  mutate(is_outcome = labels %in% c(\"purchase\", \"no_purchase\"))\n\n# Visualize complete user journeys as a sunburst diagram\nplot_ly(sunburst_data,\n        type = \"sunburst\",\n        ids = ~ids,\n        labels = ~labels,\n        parents = ~parents,\n        values = ~value,\n        marker = list(colors = ifelse(sunburst_data$is_outcome, ifelse(sunburst_data$labels == \"purchase\", \"#2ca02c\", \"#d62728\"), \"#1f77b4\")))\n\n\n\n\n\n\nInsight:\n\nDominant path: page_view → product_view → add_to_cart → checkout → purchase\nAlternative paths mostly terminate in no_purchase\nConversion depends on staying on a narrow “golden path”\n\nUX Implications\nBy treating events as connected sequences, we can:\n\nIdentify high-impact interactions driving conversion\nUnderstand where and how users abandon\nPrioritize design and experimentation based on evidence\n\nSequence-aware analysis provides better insight than static funnels, while complementing qualitative research to answer where and why UX issues occur.\nBottom line: Behavior-aware analytics leads to smarter UX decisions and more effective product interventions."
  }
]