"0","# ------------------------------"
"0","# 1. Create synthetic clickstream dataset"
"0","# ------------------------------"
"0","n_sessions <- 500"
"0","events <- c(""page_view"", ""product_view"", ""add_to_cart"", ""checkout"", ""logout"")"
"0",""
"0","df <- data.frame(SessionID = integer(), UserID = integer(),"
"0","                 EventType = character(), Outcome = character(),"
"0","                 stringsAsFactors = FALSE)"
"0",""
"0","for (sid in 1:n_sessions) {"
"0","  n_events <- sample(3:6, 1)  # session length"
"0","  path <- character(n_events)"
"0","  "
"0","  # First event is always page_view"
"0","  path[1] <- ""page_view"""
"0","  "
"0","  for (i in 2:n_events) {"
"0","    prev <- path[i-1]"
"0","    # Define branching probabilities"
"0","    if (prev == ""page_view"") {"
"0","      path[i] <- sample(c(""product_view"", ""logout""), 1, prob = c(0.7, 0.3))"
"0","    } else if (prev == ""product_view"") {"
"0","      path[i] <- sample(c(""add_to_cart"", ""logout""), 1, prob = c(0.6, 0.4))"
"0","    } else if (prev == ""add_to_cart"") {"
"0","      path[i] <- sample(c(""checkout"", ""logout""), 1, prob = c(0.7, 0.3))"
"0","    } else if (prev == ""checkout"") {"
"0","      path[i] <- sample(c(""purchase"", ""no_purchase""), 1, prob = c(0.6, 0.4))"
"0","    } else if (prev == ""logout"") {"
"0","      path[i] <- ""no_purchase""  # absorbing"
"0","    }"
"0","  }"
"0","  "
"0","  # Determine Outcome as last event"
"0","  outcome <- ifelse(path[n_events] == ""purchase"", ""purchase"", ""no_purchase"")"
"0","  "
"0","  df <- rbind(df, data.frame(SessionID = sid,"
"0","                             UserID = sid,  # for simplicity"
"0","                             EventType = path,"
"0","                             Outcome = outcome,"
"0","                             stringsAsFactors = FALSE))"
"0","}"
