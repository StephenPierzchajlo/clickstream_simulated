"0","# ----------------------------------------"
"0","# Alluvial flow of user transitions"
"0","# ----------------------------------------"
"0",""
"0","library(ggalluvial)"
"0",""
"0","df_flow <- df %>%"
"0","  group_by(SessionID) %>%"
"0","  mutate(next_event = lead(EventType)) %>%"
"0","  ungroup() %>%"
"0","  mutate(next_event = ifelse(is.na(next_event), Outcome, next_event))"
"0",""
"0","flow_counts <- df_flow %>%"
"0","  group_by(EventType, next_event) %>%"
"0","  summarise(Freq = n(), .groups = ""drop"")"
"0",""
"0","ggplot(flow_counts,"
"0","       aes(axis1 = EventType, axis2 = next_event, y = Freq)) +"
"0","  geom_alluvium(aes(fill = next_event), width = 1/12) +"
"0","  geom_stratum(width = 1/12, fill = ""grey"", color = ""black"") +"
"0","  geom_text(stat = ""stratum"", aes(label = after_stat(stratum))) +"
"0","  scale_x_discrete(limits = c(""Current Event"", ""Next Event"")) +"
"0","  labs("
"0","    title = ""User Flow and Drop-off Paths"","
"0","    y = ""Number of Users"""
"0","  ) +"
"0","  theme_minimal()"
"0",""
