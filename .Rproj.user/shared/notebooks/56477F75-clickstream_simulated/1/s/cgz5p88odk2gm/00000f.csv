"0","# ----------------------------------------"
"0","# Prepare sunburst hierarchy"
"0","# ----------------------------------------"
"0",""
"0","library(plotly)"
"0","library(purrr)"
"0",""
"0","sunburst_data <- path_counts %>%"
"0","  mutate(parts = strsplit(path, ""/"")) %>%"
"0","  rowwise() %>%"
"0","  mutate("
"0","    labels = list(parts[[1]]),"
"0","    values = list(rep(value, length(parts[[1]])))"
"0","  ) %>%"
"0","  unnest(c(labels, values)) %>%"
"0","  group_by(path) %>%"
"0","  mutate("
"0","    id = paste0(path, ""_"", row_number()),"
"0","    parent_id = lag(id)"
"0","  ) %>%"
"0","  ungroup()"
"0",""
